<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>

  <title>Tic Tac Toe</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

  <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous">
  </script>

  <script src="js/app-main.js"></script>

  <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
  />

  <link rel="stylesheet" href="css/app-layout.css"/>

  <link rel="icon" type="image/png" href="images/tic-tac-toe.png"/>

</head>
<body>

<nav class="navbar navbar-light bg-light">
  <div class="container-fluid">
    <span class="navbar-brand">
      <img alt="Tic Tac Toe" src="images/tic-tac-toe.png"/> Tic Tac Toe
    </span>
  </div>
</nav>

<div class="game-area card">
  <div class="card-body">
    <h4 class="game-status">
    	<div th:if="${game.getPlayerState().isInProgress()}" class="alert alert-light" role="alert">
    		Your turn. Click a square to place an <span th:text="${game.isPlayerGoFirst() ?  'X' : 'O'}"></span>.
      </div>
      <div th:if="${game.getPlayerState().isWin()}" class="alert alert-success" role="alert">
    		YOU WIN! A sound victory. ðŸŽ‰
      </div>
      <div th:if="${game.getPlayerState().isLoss()}" class="alert alert-danger" role="alert">
    		You've lost. Better luck next time!
      </div>
      <div th:if="${game.getPlayerState().isDraw()}" class="alert alert-primary" role="alert">
    		Mheh! A smelly draw. ðŸ’©
      </div>
    </h4>

    <table class="board">
      <tr th:each="row : ${game.getBoard().getTiles()}" class="board-row">
        <td th:each="tile : ${row}">
          <div th:id="${tile.getId()}"
               class="board-row-tile"
               th:classappend="${!tile.isEmpty()} ? ${tile} + '-value' : (${!game.isGameOver()} ? 'available')"
               th:text="${tile}">
            &nbsp;
          </div>
        </td>
      </tr>
    </table>

    <form id="form_mark_tile" th:action="@{/}" method="POST" class="form-inline">
      <div class="checkbox">
        <label><input name="player_go_first" type="checkbox" th:checked="${game.isPlayerGoFirst()}"/> Play First</label>
      </div>

      <div class="btn-new-game-wrap">
        <button id="btn-new-game" class="btn btn-success btn-lg" role="button">New Game</button>
      </div>

      <input id="is_game_over" type="hidden" th:value="${game.isGameOver()}"/>
      <input id="tile_id" name="tile_id" type="hidden" value=""/>
      <input id="new_game" name="new_game" type="hidden" value=""/>
    </form>
  </div>
</div>

</body>
</html>
